<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting</title>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <!-- external css -->
    <link rel="stylesheet" href="body-style.css">

    <!-- icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
</head>


<body>
    <div class="container">

        <div class="row my-2">
            <div class="col-12">
                <div class="card border-0 rounded p-2">
                    <h1 class="h3 p-0 m-0">Settings</h1>
                </div>
            </div>
        </div>

        <!-- Settings options -->
        <div class="row">
            <div class="col-lg-4">
                <div class="card  border-0 p-2 text-center">
                    <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist"
                        aria-orientation="vertical">

                        <a href="" class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home"
                            aria-selected="true">Account Info
                        </a>

                        <a href="" class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-profile" type="button" aria-controls="v-pills-profile"
                            aria-selected="false">Sign in & Security
                        </a>

                        <a href="" class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages"
                            aria-selected="false">Display
                        </a>

                        <a href="" class="nav-link" id="v-pills-settings-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-settings" type="button" role="tab" aria-controls="v-pills-settings"
                            aria-selected="false">Privacy
                        </a>
                    </div>
                </div>
            </div>
            <!-- Settings options End-->

            <div class="col-lg-8 mt-2 mt-lg-0">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- INFORMATION SECTION -->
                    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                        aria-labelledby="v-pills-home-tab" tabindex="0">

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Information</h5>
                            </div>
                            <div class="card-body">
                                <!-- INFORMTAION EDIT SECTION-->

                                <!-- FORM START -->
                                <form name="edit-profile" onsubmit="return validateForm();">
                                    <div class="row">
                                        <div class="col-md-8 order-1 order-md-0">
                                            <div class="mb-3">
                                                <label for="FullName" class="form-label">Full Name</label>
                                                <input type="text" id="FullName" class="form-control" name="full-name">
                                                <small class="text-danger" id="fullname-validation"></small>
                                            </div>

                                            <div class="mb-3">
                                                <label for="Email" class="form-label">Email</label>
                                                <input type="email" id="Email" class="form-control" name="u_email">
                                                <small class="text-danger" id="email-validation"></small>
                                            </div>

                                            <div class="mb-3">
                                                <label for="Username" class="form-label">Username</label>
                                                <input type="text" id="Username" class="form-control" name="u_name">
                                                <small class="text-danger" id="username-validation"></small>
                                            </div>

                                            <div class="mb-3">
                                                <label for="employee-id" class="form-label">Employee ID</label>
                                                <input type="text" id="employee-id" class="form-control" name="emp_id">
                                                <small class="text-danger" id="empId-validation"></small>
                                            </div>

                                            <div class="mb-3">
                                                <label for="contact-no" class="form-label">Contact Number</label>
                                                <input type="text" id="contact-no" class="form-control"
                                                    name="u_contact">
                                                <small class="text-danger" id="contact-validation"></small>
                                            </div>
                                        </div>
                                        <div class="col-md-4 order-0 order-md-1">
                                            <div class="text-center">
                                                <img 
                                                alt="Profile Picture" 
                                                src="Images/profile-image-2.jpeg"
                                                id="profile-pic" 
                                                class="rounded-circle img-responsive mt-2"
                                                width="128" height="128">

                                                <div class="mt-2">
                                                    <label for="image-input"><i class="fa fa-upload"></i></label>
                                                    <input type="file" id="image-input" accept="image/*">
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- SUBMIT BUTTON -->
                                    <button type="submit" class="btn btn-primary mt-2 text-center">Save changes</button>
                                    <!-- SUBMIT BUTTON END -->
                                </form>
                                <!-- FORM END-->
                            </div>
                        </div>
                    </div>


                    <!-- PASSWORD SECTION -->
                    <div class="tab-pane fade" id="v-pills-profile" role="tabpanel"
                        aria-labelledby="v-pills-profile-tab" tabindex="0">

                        <div class="card">

                            <div class="card-header">
                                <h5 class="card-title mb-0">Change Password</h5>
                            </div>

                            <div class="card-body">
                                <!-- FORM START-->
                                <form name="login_form" onsubmit="return validateLogin();">
                                    <div class="mb-3">
                                        <label for="oldpassword" class="form-label">Password</label>
                                        <input type="text" id="oldpassword" class="form-control" name="old-password">
                                        <small class="text-danger" id="old-password-validation"></small>
                                    </div>
                                    <div class="mb-3">
                                        <label for="newPassword" class="form-label">Old Password</label>
                                        <input type="password" id="newPassword" class="form-control"
                                            name="new-Password">
                                        <small class="text-danger" id="new-password-validation"></small>
                                    </div>
                                    <div class="mb-3">
                                        <button type="submit" class="btn btn-primary w-25">Log In</button>
                                    </div>

                                </form>
                                <!-- FORM END-->
                            </div>

                        </div>
                    </div>
                    <!-- PASSWORD SECTION END-->

                    <!-- DISPLAY SECTION -->
                    <div class="tab-pane fade" id="v-pills-messages" role="tabpanel"
                        aria-labelledby="v-pills-messages-tab" tabindex="0">

                        <div class="row p-2">
                            <div class="col-12">
                                <div class="card border-0 shadow p-2">
                                    <h5 class="fw-normal">Display</h5>
                                    <div class="dark-mode-btn d-flex justify-content-between align-items-center pt-2">
                                        <p class="p-0 m-0 ">Dark Mode</p>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" id="dark-mode-toggle" type="checkbox"
                                                role="switch" id="flexSwitchCheckDefault">
                                            <label class="form-check-label" for="flexSwitchCheckDefault"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="v-pills-settings" role="tabpanel"
                        aria-labelledby="v-pills-settings-tab" tabindex="0">...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- DARK MODE JS FILE -->
    <script src="dark-mode.js"></script>

    <!-- EDIT PROFILE VALIDATION -->
    <script>
        function validateForm() {
            let isValid = true;

            // Full Name Validation
            const fullName = document.getElementById('FullName');
            const fullNameValidation = document.getElementById('fullname-validation');
            if (fullName.value.trim() === "") {
                fullName.classList.add('is-invalid');
                fullNameValidation.innerText = "Full Name is required.";
                isValid = false;
            } else {
                fullName.classList.remove('is-invalid');
                fullName.classList.add('is-valid');
                fullNameValidation.innerText = "";
            }

            // Email Validation
            const email = document.getElementById('Email');
            const emailValidation = document.getElementById('email-validation');
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (email.value.trim() === "") {
                email.classList.add('is-invalid');
                emailValidation.innerText = "Email is required.";
                isValid = false;
            } else if (!emailPattern.test(email.value.trim())) {
                email.classList.add('is-invalid');
                emailValidation.innerText = "Please enter a valid email address.";
                isValid = false;
            } else {
                email.classList.remove('is-invalid');
                email.classList.add('is-valid');
                emailValidation.innerText = "";
            }

            // Username Validation
            const username = document.getElementById('Username');
            const usernameValidation = document.getElementById('username-validation');
            if (username.value.trim() === "") {
                username.classList.add('is-invalid');
                usernameValidation.innerText = "Username is required.";
                isValid = false;
            } else {
                username.classList.remove('is-invalid');
                username.classList.add('is-valid');
                usernameValidation.innerText = "";
            }

            // Employee ID Validation
            const empId = document.getElementById('employee-id');
            const empIdValidation = document.getElementById('empId-validation');
            if (empId.value.trim() === "") {
                empId.classList.add('is-invalid');
                empIdValidation.innerText = "Employee ID is required.";
                isValid = false;
            } else {
                empId.classList.remove('is-invalid');
                empId.classList.add('is-valid');
                empIdValidation.innerText = "";
            }

            // Contact Number Validation
            const contact = document.getElementById('contact-no');
            const contactValidation = document.getElementById('contact-validation');
            const contactPattern = /^\d{10}$/; // Assumes a 10-digit number
            if (contact.value.trim() === "") {
                contact.classList.add('is-invalid');
                contactValidation.innerText = "Contact Number is required.";
                isValid = false;
            } else if (!contactPattern.test(contact.value.trim())) {
                contact.classList.add('is-invalid');
                contactValidation.innerText = "Please enter a valid 10-digit contact number.";
                isValid = false;
            } else {
                contact.classList.remove('is-invalid');
                contact.classList.add('is-valid');
                contactValidation.innerText = "";
            }

            return isValid;
        }
    </script>
    <!-- EDIT PROFILE VALIDATION END-->


    <!-- CHANGE PASSWORD VALIDATION -->
    <script>
        function validateLogin() {
            let isValid = true;

            const oldpassword = document.getElementById('oldpassword');
            const oldPasswordValidation = document.getElementById('old-password-validation');

            if (oldpassword.value.trim() === "") {
                oldpassword.classList.add('is-invalid');
                oldPasswordValidation.innerText = "Password is required.";
                isValid = false;
            } else {
                oldpassword.classList.remove('is-invalid');
                oldpassword.classList.add('is-valid');
                oldPasswordValidation.innerText = "";
            }

            const newPassword = document.getElementById('newPassword');
            const newPasswordValidation = document.getElementById('new-password-validation');
            if (newPassword.value.trim() === "") {
                newPassword.classList.add('is-invalid');
                newPasswordValidation.innerText = "New Password is required.";
                isValid = false;
            } else {
                newPassword.classList.remove('is-invalid');
                newPassword.classList.add('is-valid');
                newPasswordValidation.innerText = "";
            }

            return isValid;
        }
    </script>
    <!-- CHANGE PASSWORD VALIDATION  END-->

    <!-- ADD PROFILE PICTURE -->
    <script>
        let profilePic = document.getElementById("profile-pic");
        let inputFile = document.getElementById("image-input");
    
        // Load the saved image from localStorage when the page loads
        window.onload = function() {
            const savedImage = localStorage.getItem("profileImage");
            if (savedImage) {
                profilePic.src = savedImage;
            }
        };
    
        inputFile.onchange = function () {
            const file = inputFile.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    profilePic.src = e.target.result;
                    localStorage.setItem("profileImage", e.target.result);
                };
                reader.readAsDataURL(file);
            }
        };
    </script>
    <!-- ADD PROFILE PICTURE END-->
    
    
</body>

</html>